<?xml version="1.0" encoding="UTF-8"?>
<html xmlns="http://www.w3.org/1999/xhtml" 
    xmlns:h="http://java.sun.com/jsf/html" 
    xmlns:f="http://java.sun.com/jsf/core" 
    xmlns:p="http://primefaces.org/ui"
    xmlns:ui="http://java.sun.com/jsf/facelets">
      
<h:head>

</h:head> 
<h:body>
	<ui:composition template="/facelets/templates/intranet/intLayout.xhtml">
 		<ui:define name="content">	
			<h:panelGrid width="100%">
			<p:fieldset legend="Registro de Ficha Médica">
				
			<h:form id="myForm">			
						
				<p:panel header="Buscar Mascota por Microchip">
					<h:panelGrid columns="4">
					
						<h:outputText value="Código Microchip" style="width:100px;"/>
						<p:spacer width="100" height="25" />
						<p:inputMask value="#{fichaMedicaAction.codigoRfid}" mask="999999999999999"/>
						<p:commandButton value="Buscar Macota" action="#{fichaMedicaAction.buscarMascota}" update="pnlMascota"/>								
					
					</h:panelGrid>		
											
				</p:panel>
				
				<p:panel header="Ficha Médica" id="pnlMascota">
					<h:panelGrid columns="3">
						
						<h:outputText value="Código Microchip" style="width:100px;"/>
						<p:spacer width="100" height="25" />
						<h:inputText  value="#{fichaMedicaAction.mascota.rfid.codInterno}" style="font-weight:bold" disabled="true"/>
																							
						<h:outputText value="Raza" style="width:100px;"/>
						<p:spacer width="100" height="25" />
						<h:inputText value="#{fichaMedicaAction.mascota.razaMascota}" style="font-weight:bold" disabled="true"/>
										
						<h:outputText value="Genero" style="width:100px;"/>
						<p:spacer width="100" height="25" />
						<h:inputText value="#{fichaMedicaAction.mascota.generoMascota}" style="font-weight:bold" disabled="true"/>
						
						<h:outputText value="Nombre" style="width:100px;"/>
						<p:spacer width="100" height="25" />
						<h:inputText value="#{fichaMedicaAction.mascota.nombreMascota}" style="font-weight:bold" disabled="true"/>
						
						<h:outputText value="Fecha" style="width:100px;"/>
						<p:spacer width="100" height="25" />
						<h:outputText value="#{fichaMedicaAction.fichaMedica.fechaVisita}" style="font-weight:bold">
						 	<f:convertDateTime pattern="dd/MM/yyyy HH:mm" />
						</h:outputText>
						
						<h:outputText value="Ver Fichas Médica" style="width:100px;"/>
						<p:spacer width="100" height="25" />
						<h:commandLink actionListener="#{fichaMedicaAction.mostrarFichaMedica}"  target="_blank" disabled="#{empty fichaMedicaAction.mascota}">
							<h:outputText value="#{empty fichaMedicaAction.mascota ? 'Seleccione una mascota':'Ver ficha médica' }" style="width:100px;"/>
						</h:commandLink>
						
						<h:outputText value="Ver Certificado" style="width:100px;"/>
						<p:spacer width="100" height="25" />
						<h:commandLink actionListener="#{fichaMedicaAction.mostrarCertificado}"  target="_blank" disabled="#{empty fichaMedicaAction.mascota}">
							<h:outputText value="#{empty fichaMedicaAction.mascota ? 'Seleccione una mascota':'Ver Certificado' }" style="width:100px;"/>
						</h:commandLink>
						
						<h:outputText value="Observaciones" style="width:100px;"/>
						<p:spacer width="100" height="25" />
						<p:inputTextarea value="#{fichaMedicaAction.fichaMedica.observacion}" rows="10" cols="30" autoResize="false"/>

						<h:outputText value="Registrar Ficha Médica" style="width:100px;"/>
						<p:spacer width="100" height="25" />
						<p:commandButton value="Registrar" action="#{fichaMedicaAction.ingresarFichaMedica}" disabled=""/>
						
					</h:panelGrid>											
				</p:panel>
			
				<p:growl showDetail="true" autoUpdate="true" />
			</h:form>
			
			</p:fieldset>
		
			</h:panelGrid>
 		</ui:define>
 		
	</ui:composition>
</h:body>

</html>